"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8685],{8685:(Y,h,i)=>{i.r(h),i.d(h,{SignupPageModule:()=>U});var C=i(9808),o=i(4182),f=i(501),l=i(5649),m=i(655),d=i(1010);class v extends d.r{constructor(n){super(n),this.controlType="textbox",this.type=n.type||""}}class S extends d.r{constructor(n){super(n),this.controlType="email"}}var b=i(783);class M extends d.r{constructor(n){super(n),this.controlType="password",console.log("retype",this.retypePassword)}}var t=i(2096),O=i(9955),x=i(3497),T=i(4372);let w=(()=>{class s{constructor(e,r,u,a,c,p,g){this.modalCtrl=e,this.authService=r,this.loadingCtrl=u,this.alertCtrl=a,this.formBuilder=c,this.router=p,this.service=g,this.usersFields=[new v({key:"firstName",label:"nome",required:!0,order:1}),new v({key:"lastName",label:"cognome",required:!0,order:2}),new S({key:"email",label:"email",required:!0,order:3}),new M({key:"password",label:"password",required:!0,retypePassword:!0})],this.signupForm=this.formBuilder.group({email:["",o.kI.compose([o.kI.required,o.kI.email])],password:["",o.kI.compose([o.kI.minLength(6),o.kI.required])]})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}ngOnInit(){}filter(e){}dismiss(e){this.modalCtrl.dismiss(e)}submit(e){return(0,m.mG)(this,void 0,void 0,function*(){this.user=(new b.T).load(e),this.user.password=e.password.password,this.user.email=e.email.email,this.signupUser(this.signupForm,this.user)})}signupUser(e,r){return(0,m.mG)(this,void 0,void 0,function*(){this.authService.signupUser(r,()=>(0,m.mG)(this,void 0,void 0,function*(){yield this.service.callCloudPushUser(r.serialize()),console.log("loading",this.modal),this.modal.dismiss().then(()=>{})}),y=>{this.modal.dismiss().then(()=>(0,m.mG)(this,void 0,void 0,function*(){const P=yield this.alertCtrl.create({message:y.message?y.message:`utente ${r.getTitle().value} creato correttamente`,buttons:[{text:"Ok",role:"cancel"}]});yield P.present(),yield P.onDidDismiss(),this.router.navigateByUrl("home")}))},()=>{this.router.navigateByUrl("home")}),this.modal=yield this.loadingCtrl.create(),yield this.modal.present()})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(l.IN),t.Y36(O.e),t.Y36(l.HT),t.Y36(l.Br),t.Y36(o.qu),t.Y36(f.F0),t.Y36(x.f))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-signup"]],decls:2,vars:1,consts:[[3,"questions","interactiveSubmit","singleSubmit"]],template:function(e,r){1&e&&(t.TgZ(0,"ion-content")(1,"app-dynamic-form",0),t.NdJ("interactiveSubmit",function(a){return r.filter(a)})("singleSubmit",function(a){return r.submit(a)}),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("questions",r.usersFields))},directives:[l.W2,T.r],styles:["form[_ngcontent-%COMP%]{margin-bottom:32px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px!important}p[_ngcontent-%COMP%]{font-size:.8em;color:#d2d2d2}ion-label[_ngcontent-%COMP%]{margin-left:5px}ion-input[_ngcontent-%COMP%]{padding:5px}.invalid[_ngcontent-%COMP%]{border-bottom:1px solid #ff6153}.error-message[_ngcontent-%COMP%]{min-height:2.2rem}.error-message[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:2px 0;font-size:60%;color:#ff6153}.error-message[_ngcontent-%COMP%]   .item-inner[_ngcontent-%COMP%]{border-bottom:0!important}"]}),s})();var I=i(4316);const B=[{path:"",component:w}];let U=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[C.ez,o.u5,o.UX,l.Pc.forRoot(),f.Bz.forChild(B),I.N]]}),s})()}}]);